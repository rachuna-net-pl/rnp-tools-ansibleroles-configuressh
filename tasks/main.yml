- name: "[Ubuntu] Install ssh"
  apt:
    name: "ssh"
    state: present
  when: input_role_os_distribution == "Ubuntu"

- name: "[CentOS] Install ssh"
  yum:
    name: [ 'openssh-server', 'openssh-clients']
    state: present
  when: input_role_os_distribution == "CentOS"

- name: "[RedHat] Install ssh"
  yum:
    name: [ 'openssh-server', 'openssh-clients']
    state: present
  when: input_role_os_distribution == "RedHat"

- name: "Set SSH Port"
  lineinfile:
    dest: "{{ vars_sshd_config_path }}" 
    regexp: '^(#Port|Port)'
    line: "Port {{ input_role_ssh_configuration.port }}" 
    state: present
  # notify: Restart sshd
